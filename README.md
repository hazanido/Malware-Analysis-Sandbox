# Malware Analysis Sandbox

## Overview

This project provides a sandbox environment for analyzing potentially malicious files in a secure, isolated virtual machine. Users can upload files through a web interface, and the system will execute the files in a controlled environment using Firejail, generating detailed reports on their behavior. The project leverages VirtualBox for virtualization and Flask for the web interface.

## Features

- **Isolated Environment**: Files are executed in a secure, sandboxed environment using Firejail.
- **Detailed Reports**: The system generates comprehensive reports on the file's activities, including system commands executed and any changes made to the system.
- **Web Interface**: Users can easily upload files and view reports through a simple web interface.

## Project Structure

- `setup_virtualbox.sh`: Script for setting up the virtual machine with Ubuntu Server in VirtualBox.
- `app.py`: Flask application providing the web interface for file upload and report access.
- `malware_execution.py`: Script for executing files in a sandboxed environment.
- `complex_example.py`: An example script demonstrating the generation of a detailed report.
- `test_sandbox.py`: Unit tests to verify the functionality of the sandbox environment.

## Getting Started

### Prerequisites

- **VirtualBox**: Ensure VirtualBox is installed on your system. You can download it from [here](https://www.virtualbox.org/wiki/Downloads).
- **Python 3.x**: The project is built using Python 3. Ensure Python and pip are installed.
- **Firejail**: Used to sandbox the execution of files.

### Installation

1. **Clone the Repository:**
   ```bash
   git clone https://github.com/yourusername/malware-analysis-sandbox.git
   cd malware-analysis-sandbox
   ```

2. **Set Up the Virtual Machine:**
   Run the setup script to create and configure the virtual machine.
   ```bash
   bash setup_virtualbox.sh
   ```

3. **Install Dependencies:**
   Install the required Python packages.
   ```bash
   pip install -r requirements.txt
   ```

### Running the Application

1. **Start the Flask Application:**
   ```bash
   python app.py
   ```
   The web interface will be accessible at `http://127.0.0.1:5000`.

2. **Upload a File:**
   - Navigate to the upload page and upload the file you want to analyze.
   - The file will be executed in the sandbox, and a report will be generated.

3. **View Reports:**
   - After execution, a link to the generated report will be provided.
   - You can also access reports directly through the `/report/<filename>` endpoint.

### Testing

Run the unit tests to ensure everything is working correctly:
```bash
pytest test_sandbox.py
```

## Usage

1. **Uploading Files**: Go to the upload page, select your file, and click "Upload."
2. **Viewing Reports**: After the file is processed, you'll get a link to the report. Click the link to view the detailed report.

## Sample Report

Here is an example of what a generated report might look like:

```
System Information:
- System: Linux
- Processor: x86_64
- ...

File sandbox_test_file.txt created:
- This is a test file created by the sandboxed script.
- ...

Command output:
- total 20
- drwxrwxrwx  2 sandbox sandbox 4096 Aug 27 22:00 reports
- ...
```

## Future Improvements

- **Support for Additional File Formats**: Extend the system to handle more file types.
- **Enhanced Security**: Implement additional layers of security to further isolate the execution environment.
- **User Interface Improvements**: Add more features to the web interface, such as file history and enhanced report visualization.

## Conclusion

This project demonstrates a powerful approach to analyzing potentially malicious files in a controlled, sandboxed environment. With further development, this system could be expanded into a comprehensive tool for cybersecurity professionals.

